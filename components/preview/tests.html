

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>CDLIB UI Kit</title>
    <meta name="robots" content="noindex">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
    <style>
      /* /*! modern-normalize v0.6.0 | MIT License | https://github.com/sindresorhus/modern-normalize */*,::after,::before{box-sizing:border-box}:root{-moz-tab-size:4;tab-size:4}html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}body{font-family:system-ui,-apple-system,'Segoe UI',Roboto,Helvetica,Arial,sans-serif,'Apple Color Emoji','Segoe UI Emoji'}hr{height:0}abbr[title]{text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,pre,samp{font-family:SFMono-Regular,Consolas,'Liberation Mono',Menlo,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{padding:0}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}summary{display:list-item}code{color:#c80000} */
    </style>
    <link rel="stylesheet" href="../../ui-assets/css/main.css" media="print" onload="this.media='all'">
  </head>
  <body>
    <h1>Fractal and Gulp Toolkit Tests</h1>

<h2>Production Tasks</h2>

<p>Run 'gulp' in your terminal to begin the following tests:</p>

<h3>Verifying SCSS Complilation</h3>

<p>This <code>code</code> and other code samples on this page should be red. All text on this page should be styled in the system-ui font. These conditions confirm the following:</p>

<ol>
  <li>The <a href="https://github.com/sindresorhus/modern-normalize">modern-normalize</a> CSS library is getting imported into _critical.scss via the <a href="https://github.com/postcss/postcss-import">postcss-import</a> plugin</li>
  <li>The scss in _critical.scss is getting compliled to critical.css</li>
  <li>The compiled CSS file critical.css is getting inlined into the <code>&lt;style&gt;</code> tag within the <code>&lt;head&gt;</code> of the Fractal templates</li>
  <li>The scss variable <code>$color-darkred</code> is getting compiled from the _variables.scss file</li>
</ol>

<p><span class="test-main-scss">This text should be green</span> which confirms the following:</p>

<ol>
  <li>The scss in _tests.scss is getting compliled to main.css via import from main.scss</li>
  <li>The compiled CSS file main.css is loading from the <code>&lt;link&gt;</code> tag within the <code>&lt;head&gt;</code> of the Fractal templates</li>
  <li>The scss variable <code>$color-green</code> is getting compiled from the _variables.scss file</li>
</ol>

<h3>Verifying Sass Linter</h3>

<p class="test-sass-lint">In the terminal, there should be the following warning:</p>

<pre>
  <samp>
  scss/_tests.scss
    13:3  ⚠  Expected "display" to come before "cursor"
  </samp>
</pre>

<p>This CSS property sort order warning (intentional for this test) confirms that the <a href="https://stylelint.io/">stylelint</a> linter is working.</p>

<h3>Verifying Autoprefixer's Basic Prefixing</h3>

<p class="test-autoprefixer-basic">This paragraph is styled with the <code>user-select</code> CSS property, which should create browser prefixes in the CSS. Inspect this paragraph via DevTools and confirm the appearance (usually crossed out) of <code>-webkit-</code> and other browser prefixes.</p> This will confirm that Autoprefixer is working.

<h3>Verifying Autoprefixer's IE Grid Prefixing</h3>

<div class="test-autoprefixer-grid">
  <div class="test-grid-header">This should be a header cell spanning a 4-cell, 2-by-2 grid, with a 5 pixel grid gap and gray background. It should appear as such in IE 11 via Autoprefixer applying <code>-ms-grid</code> prefixes. Confirm by viewing this in IE 11.</div>
  <div class="test-grid-1">Cell 1</div>
  <div class="test-grid-2">Cell 2</div>
  <div class="test-grid-3">Cell 3</div>
  <div class="test-grid-4">Cell 4</div>
</div>

<h3>Verifying PostCSS Logical Plugin</h3>

<p>In the SCSS, the logical properties <code>inline-size</code>, <code>block-size</code>, and <code>inset</code> should be converted to the physical properties <code>width</code>, <code>height</code>, and <code>top</code>, <code>right</code>, <code>bottom</code>, <code>left</code> respectively in the CSS.</p>

<p>There should be a green box inset 10px from the top, 40px from the right, 60px from the bottom, and 30% from the left of a red box 80% wide and 150px high:</p>

<div class="test-postcsslogical">
  <div>Child Box</div>
</div>

<p>This would confirm that the <a href="https://github.com/csstools/postcss-logical">postcss-logical</a> plugin is working.</p>

<h3>Verifying SVG Injection into CSS</h3>

<p class="test-icon">A green "check" icon as a background image should appear here:</p>

<p>This confirms that the <a href="https://github.com/jonathantneal/postcss-svg">postcss-svg</a> plugin is working.</p>

<h3>Verifying Faker Library</h3>

<p><strong>Text generated by Faker should follow here:</strong> Autem at totam cumque similique et nostrum. Ea voluptates maiores. Dolor adipisci excepturi et ipsa totam quis ipsam fuga eos. Nam qui placeat qui.</p>

<h3>Verifying JavaScript Functionality</h3>

<p>Is JavaScript is getting copied from /js/ folder to /ui-assets/js folder and loading? (yes or no): <strong class="test-javascript">no</strong></p>

<p>In DevTools, confirm that the <code>body</code> tag has a class of <code>js-working</code>.</p>

<p>Confirm that all three JS files within /js/ are getting concatenated into main.js within /ui-assets/js/</p>

<h3>Verifying JavaScript Linter (eslint)</h3>

<p>Open one of the three JS files in /js/ and save it to trigger the JS linting process.</p>

<p>In the terminal, there should be the following three errors:</p>

<pre>
  <samp>
  /[user]/[path to repos]/cdlib-ui-kit/js/testarrowfunction.js
    9:1  error  fetch is not supported in IE 11

  /[user]/[path to repos]/cdlib-ui-kit/js/test-bodytag.js
    5:40  error  Extra semicolon

  /[user]/[path to repos]/cdlib-ui-kit/js/test-selector.js
    3:5  error  'unused' is defined but never used
  </samp>
</pre>

<p>The fetch error confirms that the eslint plugin, eslint-plugin-compat, is working properly.</p>

<p>The semicolon and unused errors confirm that the eslint plugin, eslint-plugin-standard, is working property.</p>

<p>In the file test-selector.js, the two variables <code>ignoreThisLine</code> and <code>ignoreNextLine</code> should be getting ignored by eslint due to the use of eslint ignore directives; they should not be throwing eslint errors.</p>

<h3>Verifying JavaScript Compiler (babel)</h3>

<p>In /ui-assets/js/main.js, confirm the following:</p>

<ol>
  <li>The ES2015 arrow function declared with the <code>const</code> variable <code>arrowFunctionTest</code> in /js/test-arrowfunction.js is getting compiled to the ES5 equivalent syntax. The variable should be declared as <code>var</code></li>
  <li>All lines end in a semicolon.</li>
</ol>

<h2>Build Tasks</h2>

<p>Run 'gulp build' in your terminal to begin the following tests:</p>

<h3>Verifying File Compilation</h3>

<p>Confirm that /dist/ is created at root. If already created from previous build, confirm that folder's existing build files get deleted before new build files are added. Check that all files in /dist/ contain the same "Date Modified" date/time as when 'gulp build' was run.</p>

<h3>Verifying Error Reporting</h3>

<p>Confirm that the same Sass and JavaScript errors presented from the 'Gulp' task above were also generated in the console for the build task.</p>

<h3>Verifying UI Library Build in Browser</h3>

<p>Open index.html in a browser. Confirm that the CDLIB UI Library's UI and content matches exactly that of the 'Gulp' task.</p>

<h3>Verifying Asset File Minification</h3>

<p>Confirm that /dist/ui-assets/css/main.css is minified without any sourcemaps.</p>

<p>Confirm that /dist/ui-assets/js/main.js is minified without any sourcemaps.</p>

<h2>Test Tasks</h2>

<p>Run 'gulp test' in your terminal to begin the test process. This will include the following tasks:</p>

<ol>
  <li>All build tasks listed above.</li>
  <li>The starting up of http-server (for Percy snapshots).</li>
  <li>The creation of a Percy build with snapshots on the Percy website.</li>
  <li>The stopping of http-server.</li>
</ol>

<h3>Verifying Accessibility Testing</h3>

<p>Browse to the "Other" page. On that page is an <code>&lt;input&gt;</code> tag missing a label:</p>

<p>This should trigger the following two accessibility errors via the <a href="https://github.com/pa11y/pa11y-ci">pa11y-ci</a> plugin in the terminal:</p>

<pre>
  <samp>
  • This textinput element does not have a name available to an accessibility
   API. Valid names are: label element, title undefined, aria-label undefined,
   aria-labelledby undefined.

  (html > body > input)

  &lt;input type="text" class="test-input-missing-label"&gt;

  • This form field should be labelled in some way. Use the label element
   (either with a "for" attribute or wrapped around the form field), or
   "title", "aria-label" or "aria-labelledby" attributes as appropriate.

  (html > body > input)

  &lt;input type="text" class="test-input-missing-label"&gt;
  </samp>
</pre>

<p>Below is the same <code>&lt;input&gt;</code> tag missing a label, but it should get skipped during the accessibility testing because pages using the "default" template do not get checked for accessibility.</p>

<input type="text" class="test-input-missing-label">

<h3>Verifying UI Library Published on GitHub Pages</h3>

<p>Confirm that the UI Library was published to the GitHub Pages URL: <a href="https://cdlib.github.io/cdlib-ui-kit">https://cdlib.github.io/cdlib-ui-kit</a>.</p>

<h3>Verify Percy Builds</h3>

<p>Check that Percy created a build at <a href="https://percy.io/CDL1/cdlib-ui">https://percy.io/CDL1/cdlib-ui</a> (login required).</p>

<p>Run the 'gulp test' process again to generate another Percy build. Compare the first and second build from the Percy website. The second build should contain no visual differences (unchanged snapshots) from the first. The paragraph of lorem ipsum text under the <strong>Verifying Faker Library</strong> heading should not have changed.</p>

<p>This verifies that Percy builds are getting created, the "testing" environment is getting set, and the faker data is not randomizing (staying fixed) between each build.</p>

<p>[end of all tests]</p>

    <script src="../../ui-assets/js/main.js"></script>
  </body>
</html>


